{% extends "includes/main.html" %}
{% load static crispy_forms_tags %}
{% block title %}Anexo Socio Productivo{% endblock %}
{% block titulo-pagina %}Anexo Socio Productivo{% endblock %}
{% block breadcrumb %}
    <ol class="breadcrumb float-sm-right px-3">
        <li class="breadcrumb-item">
            <a href="{% url 'proyecto_list' %}">Proyectos</a>
        </li>
        <li class="breadcrumb-item active">Agregar Anexo Socio Productivo</li>
    </ol>
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-12">
            <div class="card card-primary card-outline">
                <div class="bs-stepper">
                    <div class="card-header mb-3">
                        <h3 class="card-title">Agregar Anexo Socio Productivo</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-row justify-content-center">
                            <div class="bs-stepper-header" role="tablist">
                                <div class="step active">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">1</span>
                                        <span class="bs-stepper-label">Personeria</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">2</span>
                                        <span class="bs-stepper-label">Datos del proyecto</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">3</span>
                                        <span class="bs-stepper-label">Lineas de accion y presupuesto</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">4</span>
                                        <span class="bs-stepper-label">Documentacion obligatoria</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">5</span>
                                        <span class="bs-stepper-label">Diagnostico contexto general</span>
                                    </button>
                                </div>
                                <div class="line"></div>
                                <div class="step">
                                    <button type="button" class="step-trigger" role="tab">
                                        <span class="bs-stepper-circle">6</span>
                                        <span class="bs-stepper-label">Diagnostico estructura economica</span>
                                    </button>
                                </div>
                            </div>
                            <form method="post" enctype="multipart/form-data" class="w-100">
                                {% csrf_token %}
                                <div id="step_1" class="step-content">
                                    {{ form.tipo_persona|as_crispy_field }}
                                    <div class="juridica-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.nombre|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.tipo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.fecha_creacion|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.numero_personeria_juridica|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.fecha_otorgamiento|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.cuit|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-12">{{ juridica_form.domicilio_legal|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-4">{{ juridica_form.autoridad_nombre_completo|as_crispy_field }}</div>
                                            <div class="col-4">{{ juridica_form.autoridad_dni|as_crispy_field }}</div>
                                            <div class="col-4">{{ juridica_form.autoridad_cuit|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-12">{{ juridica_form.autoridad_rol|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                    <div class="humana-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.nombre_completo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.dni|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.fecha_nacimiento|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.cuil|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.domicilio_real|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.mail|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.telefono|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step_2" class="step-content" style="display: none;">
                                    <div class="juridica-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_nombre|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_tipo_actividad|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_rubro|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_objetivo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_costo|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_pertenece_comunidad_indigena|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ juridica_form.proyecto_comunidad_indigena|as_crispy_field }}</div>
                                            <div class="col-6">{{ juridica_form.proyecto_practicas_regenerativas|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                    <div class="humana-field" style="display: none;">
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_nombre|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_tipo_actividad|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_rubro|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_objetivo|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_costo|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_pertenece_comunidad_indigena|as_crispy_field }}</div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-6">{{ fisica_form.proyecto_comunidad_indigena|as_crispy_field }}</div>
                                            <div class="col-6">{{ fisica_form.proyecto_practicas_regenerativas|as_crispy_field }}</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step_3" class="step-content" style="display: none;">
                                    <div class="form-group row">
                                        <div class="col-4">{{ linea_de_accion_form.produccion_apoyo_tecnico|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.produccion_maquinaria|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.produccion_tecnologias|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-4">{{ linea_de_accion_form.produccion_entrega|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.comercializacion_fortalecimiento_institucional|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.comercializacion_apoyo_tecnologico|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-4">{{ linea_de_accion_form.comercializacion_habilidades_blandas|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.comercializacion_fortalecimiento_unidades|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.circular_fortalecimiento|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row"></div>
                                    <div class="form-group row">
                                        <div class="col-4">{{ linea_de_accion_form.circular_practicas_sostenibles|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.circular_materiales_reciclados|as_crispy_field }}</div>
                                        <div class="col-4">{{ linea_de_accion_form.circular_reduccion_residuos|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ linea_de_accion_form.destinatarios_directos|as_crispy_field }}</div>
                                        <div class="col-6">{{ linea_de_accion_form.destinatarios_indirectos|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-12">{{ linea_de_accion_form.fundamentacion|as_crispy_field }}</div>
                                    </div>
                                    <table class="table table-bordered table-striped projects">
                                        <thead>
                                            <tr>
                                                <th>TIPO DE ACTIVIDAD PRODUCTIVA</th>
                                                <th>TIPO DE BIENES/SERVICIOS</th>
                                                <th>NOMBRE DEL PRODUCTO O SERVICIO</th>
                                                <th>CANTIDAD A ADQUIRIR</th>
                                                <th>COSTO UNITARIO TOTAL</th>
                                                <th style="width: 15%" class="notexport">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="presupuestos">
                                        </tbody>
                                    </table>
                                    <button type="button"
                                            class="btn btn-primary"
                                            data-toggle="modal"
                                            data-target="#formModal">Abrir Modal</button>
                                    <div class="modal fade"
                                         id="formModal"
                                         tabindex="-1"
                                         role="dialog"
                                         aria-labelledby="formModalLabel"
                                         aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="formModalLabel">Agregar Stock</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <!-- Formulario -->
                                                    <form id="modalForm">
                                                        <div class="form-group">
                                                            <label for="tipo_actividad">TIPO DE ACTIVIDAD PRODUCTIVA</label>
                                                            <select name="tipo_actividad"
                                                                    class="form-control"
                                                                    id="presupuesto_select_tipo_actividad"
                                                                    required>
                                                                <option selected></option>
                                                                <option id="1" value="Apoyo técnico para mejorar competitividad">Apoyo técnico para mejorar competitividad</option>
                                                                <option id="2" value="Acceso a máquinas, herramientas e insumos">Acceso a máquinas, herramientas e insumos</option>
                                                                <option id="3" value="Incorporación de nuevas tecnologías">Incorporación de nuevas tecnologías</option>
                                                                <option id="4" value="Entrega directa según stock">Entrega directa según stock</option>
                                                                <option id="5" value="Fortalecimiento Institucional">Fortalecimiento Institucional</option>
                                                                <option id="6" value="Apoyo tecnológico">Apoyo tecnológico</option>
                                                                <option id="7" value="Habilidades blandas para la Comercialización">
                                                                    Habilidades blandas para la Comercialización
                                                                </option>
                                                                <option id="8" value="Desarrollo local">Desarrollo local</option>
                                                                <option id="9"
                                                                        value="Fortalecimiento de la Comercialización de unidades productivas">
                                                                    Fortalecimiento de la Comercialización de unidades productivas
                                                                </option>
                                                                <option id="10"
                                                                        value="Fortalecimiento a recuperadores de base, organizaciones y sistemas locales de reciclado">
                                                                    Fortalecimiento a recuperadores de base, organizaciones y sistemas locales de reciclado
                                                                </option>
                                                                <option id="11" value="Implementación de prácticas sostenibles">Implementación de prácticas sostenibles</option>
                                                                <option id="12" value="Uso de materiales reciclados">Uso de materiales reciclados</option>
                                                                <option id="13" value="Reducción de residuos">Reducción de residuos</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="bienes">TIPO DE BIENES/SERVICIO</label>
                                                            <select name="bienes" class="form-control" id="presupuesto_select_bienes">
                                                                <option selected></option>
                                                                <option class="tipo1" value="Asistencia técnica específica a través de RRHH">
                                                                    Asistencia técnica específica a través de RRHH
                                                                </option>
                                                                <option class="tipo2" value="Máquinas">Máquinas</option>
                                                                <option class="tipo2" value="Herramientas">Herramientas</option>
                                                                <option class="tipo2" value="Insumos">Insumos</option>
                                                                <option class="tipo3" value="Máquinas">Máquinas</option>
                                                                <option class="tipo3" value="Herramientas">Herramientas</option>
                                                                <option class="tipo3" value="Conectividad">Conectividad</option>
                                                                <option class="tipo4" value="Entrega directa textiles">Entrega directa textiles</option>
                                                                <option class="tipo5" value="Asesoría Contable y Asesoría Jurídica">Asesoría Contable y Asesoría Jurídica</option>
                                                                <option class="tipo5" value="Asesoría en Administración y Costos">Asesoría en Administración y Costos</option>
                                                                <option class="tipo5"
                                                                        value="Asesoría y acompañamiento en diseño e inscripción de marca">
                                                                    Asesoría y acompañamiento en diseño e inscripción de marca
                                                                </option>
                                                                <option class="tipo5"
                                                                        value="Asistencia en la confección de documentación y certificación de productos">
                                                                    Asistencia en la confección de documentación y certificación de productos
                                                                </option>
                                                                <option class="tipo6"
                                                                        value="Asesoría en redes sociales y Plataformas de Venta">
                                                                    Asesoría en redes sociales y Plataformas de Venta
                                                                </option>
                                                                <option class="tipo6"
                                                                        value="Asesoría en Marketing digital (Foto Producto - Diseño de Catálogos online)">
                                                                    Asesoría en Marketing digital (Foto Producto - Diseño de Catálogos online)
                                                                </option>
                                                                <option class="tipo7" value="Acompañamiento en técnicas de venta y oratoria">
                                                                    Acompañamiento en técnicas de venta y oratoria
                                                                </option>
                                                                <option class="tipo7" value="Acompañamiento en armado de stands y vidrieras">
                                                                    Acompañamiento en armado de stands y vidrieras
                                                                </option>
                                                                <option class="tipo8" value="Acceso a nuevos mercados">Acceso a nuevos mercados</option>
                                                                <option class="tipo8" value="Participación en ferias y mercados">Participación en ferias y mercados</option>
                                                                <option class="tipo9" value="Equipamiento">Equipamiento</option>
                                                                <option class="tipo9" value="Insumos">Insumos</option>
                                                                <option class="tipo9" value="Gastos operativos">Gastos operativos</option>
                                                                <option class="tipo9" value="Recursos humanos">Recursos humanos</option>
                                                                <option class="tipo10" value="Máquinas, Herramientas y Equipamiento">Máquinas, Herramientas y Equipamiento</option>
                                                                <option class="tipo10" value="Insumos e Indumentaria">Insumos e Indumentaria</option>
                                                                <option class="tipo10" value="Asistencia técnica">Asistencia técnica</option>
                                                                <option class="tipo10" value="Transporte">Transporte</option>
                                                                <option class="tipo10" value="Infraestructura y equipamiento">Infraestructura y equipamiento</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="nombre">NOMBRE DEL PRODUCTO O SERVICIO</label>
                                                            <input type="text"
                                                                   class="form-control"
                                                                   id="presupuesto_nombre"
                                                                   name="nombre"
                                                                   required />
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="cantidad">CANTIDAD A ADQUIRIR</label>
                                                            <input type="number"
                                                                   class="form-control"
                                                                   id="presupuesto_cantidad"
                                                                   name="cantidad"
                                                                   required />
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="costo">COSTO UNITARIO TOTAL</label>
                                                            <input type="number"
                                                                   class="form-control"
                                                                   id="presupuesto_costo"
                                                                   name="costo"
                                                                   required />
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                                    <button type="button" class="btn btn-primary" id="submitForm">Enviar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="step_4" class="step-content" style="display: none;">
                                <div class="form-group row">
                                    <div class="col-6 d-flex justify-content-center">{{ form.acta_constitutiva|as_crispy_field }}</div>
                                    <div class="col-6 d-flex justify-content-center">{{ form.estatuto|as_crispy_field }}</div>
                                    <div class="col-4 d-flex justify-content-center">{{ form.personeria_juridica|as_crispy_field }}</div>
                                    <div class="col-4 d-flex justify-content-center">{{ form.designacion_autoridades|as_crispy_field }}</div>
                                    <div class="col-4 d-flex justify-content-center">{{ form.autorizacion_gestionar|as_crispy_field }}</div>
                                </div>
                            </div>
                            <div id="step_5" class="step-content" style="display: none;">
                                <div class="juridica-field" style="display: none;">
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_juridica_form.tipo_comunidad|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_juridica_form.cantidad_integrantes|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_juridica_form.genero_mayoria|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_juridica_form.composicion_equipo|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-12">{{ diagnostico_juridica_form.mision_vision|as_crispy_field }}</div>
                                    </div>
                                </div>
                                <div class="humana-field" style="display: none;">
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.estudios_alcanzados|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.ocupacion|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.ocupacion_condicion|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.ocupacion_sosten_hogar|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.ocupacion_horas_semanales|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.beneficiario_social|as_crispy_field }}</div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-6">{{ diagnostico_fisica_form.beneficio_social|as_crispy_field }}</div>
                                    </div>
                                </div>
                            </div>
                            <div id="step_6" class="step-content" style="display: none;"></div>
                            <div class="mt-3">
                                <button id="continueButton" class="btn btn-primary mx-1" type="button">Continuar</button>
                                <a href="{% url 'proyecto_list' %}" class="btn btn-secondary">Cancelar</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block customJS %}
    <script src="{% static 'custom/js/anexo_form.js' %}"></script>
{% endblock %}
